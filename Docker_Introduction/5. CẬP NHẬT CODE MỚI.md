|                                                                                                                                                                        |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Phải làm sao nếu mày đã đóng gói thành 1 hộp cơm (container) rồi nhưng muốn thêm tương ớt (code mới) vào thì phải làm sao ?<br><br>Bài học này sẽ giải quyết vấn đề đó |

# CÁCH 1: BUILD LẠI IMAGE ĐÓ TỪ ĐẦU

1. Build image bằng câu lệnh từ trước đó

|   |
|---|
|docker build -t library-manager .|

1. Tiếp đến thì run image để tạo thành container

|   |
|---|
|docker run -d -p 8080:8080 -p 8081:8081 --name library-manager-container library-manager|

1. Nếu trùng với port cũ thì phải "kill" container cũ

|   |
|---|
|docker stop <container-id>|

Nếu trùng với "name" thì phải "remove" container đó luôn

|   |
|---|
|docker rm <container-id>|

# CÁCH 2: HOT RELOAD (cách này phiền hơn nhưng tiện hơn)

1. Viết lại Dockerfile để bật hot reload:

|   |
|---|
|# Sử dụng SDK để phát triển<br><br>FROM mcr.microsoft.com/dotnet/sdk:8.0 AS dev<br><br># Cấu hình thư mục làm việc<br><br>WORKDIR /app<br><br># Sao chép file project và restore dependencies<br><br>COPY ["LibraryManager.csproj", "."]<br><br>RUN dotnet restore "./LibraryManager.csproj"<br><br># Sao chép toàn bộ mã nguồn<br><br>COPY . .<br><br># Cấu hình lệnh chạy ứng dụng với hot reload<br><br>ENTRYPOINT ["dotnet", "watch", "run", "--urls", "[http://0.0.0.0:8080](http://0.0.0.0:8080)"]|

1. Các bước build và run container:

|   |
|---|
|docker build -t library-manager:dev -f Dockerfile .|

|   |
|---|
|docker run -d \ -p 8080:8080 \ -v /mnt/d/FPT/projects/docker-libraryManager:/app \ --name library-manager-hot \ library-manager:dev|

Giải thích:  
-v <project-path>:/app: Volume mount: Kết nối thư mục trên máy chủ (host) với một thư mục bên trong container.